# Summary

| Members | Descriptions |
|---------|--------------|
| `struct NonLinearCoeff` | Структура для хранения коэффициентов нелинейной модели. |
| `std::vector<double> calculateNonlinear(const NonLinearCoeff &coeff, double y0, int n)` | Вычисляет значения нелинейной модели на заданное количество шагов. |
| `std::vector<double> simulatePidRegulatorForNonlinear(const NonLinearCoeff &coeff, double y0, int n, double setpoint, double Kp, double Ki, double Kd, double dt)` | Моделирует систему управления с ПИД-регулятором для нелинейной модели. |
| `bool saveToCSV(const std::string& filename, const std::vector<int>& time, const std::vector<double>& values, double setpoint)` | Сохраняет данные моделирования в CSV файл. |

# Structures

## `struct NonLinearCoeff`

Структура для хранения коэффициентов нелинейной модели объекта управления.

**Members:**
- `a` - коэффициент при предыдущем значении выхода y(t-1)
- `b` - коэффициент при квадрате значения y(t-2)
- `c` - коэффициент при управляющем воздействии u
- `d` - коэффициент при синусоидальной составляющей управляющего воздействия sin(u)
- `u` - управляющее воздействие

**Description:**
Модель описывается нелинейным разностным уравнением: 
y(t) = a * y(t-1) - b * y(t-2)² + c * u + d * sin(u)

# Functions

## `std::vector<double> calculateNonlinear(const NonLinearCoeff &coeff, double y0, int n)`

Вычисляет значения нелинейной модели на заданное количество шагов вперед.

**Parameters:**
- `coeff` - структура с коэффициентами нелинейной модели
- `y0` - начальное значение выхода объекта управления
- `n` - количество шагов расчета

**Returns:**
вектор значений выхода объекта на каждом шаге времени

**Notes:**
- Для вычислений используются два предыдущих значения: y(t-2) и y(t-1)
- Возвращаемый вектор содержит значения для моментов времени t=1..n
- Модель является нелинейной из-за квадратичного члена и синусоидальной зависимости

## `std::vector<double> simulatePidRegulatorForNonlinear(const NonLinearCoeff &coeff, double y0, int n, double setpoint, double Kp, double Ki, double Kd, double dt)`

Моделирует систему управления с дискретным ПИД-регулятором для нелинейной модели объекта.

**Parameters:**
- `coeff` - структура с коэффициентами нелинейной модели
- `y0` - начальное значение выхода объекта управления
- `n` - количество шагов моделирования
- `setpoint` - заданное значение (уставка)
- `Kp` - коэффициент пропорциональной составляющей ПИД-регулятора
- `Ki` - коэффициент интегральной составляющей ПИД-регулятора
- `Kd` - коэффициент дифференциальной составляющей ПИД-регулятора
- `dt` - временной шаг дискретизации

**Returns:**
вектор значений выхода объекта на каждом шаге моделирования

**Algorithm:**
1. Расчет ошибки регулирования: e(t) = setpoint - y(t)
2. Вычисление пропорциональной составляющей: P = Kp * e(t)
3. Вычисление интегральной составляющей: I = Ki * Σ(e(t) * dt)
4. Вычисление дифференциальной составляющей: D = Kd * (e(t) - e(t-1)) / dt
5. Расчет управляющего воздействия: u_pid = P + I + D
6. Расчет нового значения выхода: y(t+1) = a*y(t) - b*y(t-1)² + c*u_pid + d*sin(u_pid)

**Warnings:**
- Коэффициенты Kp, Ki, Kd должны быть тщательно подобраны для устойчивой работы системы
- Неправильные коэффициенты могут привести к расходимости системы
- Рекомендуется использовать методы настройки ПИД-регуляторов

## `bool saveToCSV(const std::string& filename, const std::vector<int>& time, const std::vector<double>& values, double setpoint)`

Сохраняет данные моделирования в формате CSV для последующего анализа и визуализации.

**Parameters:**
- `filename` - имя файла для сохранения данных
- `time` - вектор временных меток (шагов моделирования)
- `values` - вектор значений выхода объекта
- `setpoint` - заданное значение (опционально)

**Returns:**
- `true` - если файл успешно сохранен
- `false` - если произошла ошибка при сохранении

**File Format:**
CSV файл содержит следующие столбцы:
- Time: временная метка (номер шага)
- Value: значение выхода объекта
- Setpoint: заданное значение (только если setpoint ≠ 0)

**Notes:**
- Файл сохраняется с точностью 6 знаков после запятой
- Позволяет сравнивать результаты с ПИД-регулятором и без него
- Поддерживает импорт данных в Python для построения графиков